{"ast":null,"code":"var _jsxFileName = \"/Users/francesca/Documents/Games/triple-triad/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport { Client } from 'boardgame.io/react';\nimport { Game } from 'boardgame.io/core';\n\nclass GameBoard extends Component {\n  onCardClick(id) {\n    this.props.moves.selectCard(id);\n  } // when grid cell is clicked\n\n\n  onClick(id) {\n    console.log(id);\n\n    if (this.isActive(id)) {\n      this.props.moves.selectCell(id);\n      this.props.events.endTurn();\n    }\n  }\n\n  isActive(id) {\n    if (!this.props.isActive) return false;\n    if (this.props.G.cells[id] !== null) return false;\n    return true;\n  }\n\n  isFirstPlayer() {\n    return this.props.ctx.currentPlayer === '0';\n  }\n\n  playerCaptured(id) {\n    if (this.props.G.cells[id] === null) {\n      return 'blank';\n    } else {// if it's player 1 that put the card, return player1 class\n      // else, if it's player 2,  return player2 class\n    }\n  }\n\n  render() {\n    let winner = '';\n\n    if (this.props.ctx.gameover) {\n      winner = this.props.ctx.gameoever.winner !== undefined ? React.createElement(\"div\", {\n        id: \"winner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Winner: \", this.props.ctx.gameover.winner) : React.createElement(\"div\", {\n        id: \"winner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"Draw!\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"tripleTriadGame\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"player player1 \".concat(this.isFirstPlayer() ? \"current\" : \"\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, this.props.G.firstPlayerHand.map((card, index) => {\n      return React.createElement(\"div\", {\n        className: \"card\",\n        onClick: () => this.onCardClick(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, card.map(v => {\n        return React.createElement(\"div\", {\n          className: \"cardScore\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, v);\n      }));\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Score: \", this.props.G.firstPlayerCaptures.length, \" \")), React.createElement(\"div\", {\n      className: \"board\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.props.G.cells.map((id, index) => {\n      let cellValue = this.props.G.selectedCard ? id : \"\";\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"cell\",\n        onClick: () => this.onClick(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card selected \".concat(this.playerCaptured(index)),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, cellValue ? cellValue.map(v => {\n        return React.createElement(\"div\", {\n          className: \"cardScore\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, v);\n      }) : \"\"));\n    })), React.createElement(\"div\", {\n      className: \"player player2 \".concat(this.isFirstPlayer() ? \"\" : \"current\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, this.props.G.secondPlayerHand.map((card, index) => {\n      return React.createElement(\"div\", {\n        className: \"card\",\n        onClick: () => this.onCardClick(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, card.map(v => {\n        return React.createElement(\"div\", {\n          className: \"cardScore\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, v);\n      }));\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Score: \", this.props.G.secondPlayerCaptures.length, \" \")), winner);\n  }\n\n}\n\nfunction isWin() {}\n\nfunction isDraw() {}\n\nfunction checkCard(direction, playerCard, enemyCard, inv) {\n  let flipCard = false;\n\n  if (enemyCard) {\n    console.log(\"Enemy \" + enemyCard, \"Player \" + playerCard, \"Direction \" + direction);\n\n    if (playerCard[direction] > enemyCard[inv]) {\n      flipCard = true;\n      console.log(flipCard, \"yasss\");\n      return flipCard;\n    }\n  } // if yes, check if playerCard > enemyCard in corresponding direction\n\n}\n\nfunction randomizeCards(ctx) {\n  let cards = [];\n\n  for (let i = 0; i < 5; i++) {\n    cards.push(ctx.random.Die(10, 4)); // cards = source.reduce((obj, arrValue) => (obj[arrValue] = ctx.random.Die(10), obj), {}); \n    // hand.push(Object.entries(cards));\n  }\n\n  return cards;\n}\n\nfunction checkNeighbors(id) {\n  switch (id) {\n    case 0:\n      return [1, 3];\n\n    case 1:\n      return [0, 2, 4];\n\n    case 2:\n      return [1, 5];\n\n    case 3:\n      return [0, 4, 6];\n\n    case 4:\n      return [1, 3, 5, 7];\n\n    case 5:\n      return [2, 4, 8];\n\n    case 6:\n      return [3, 7];\n\n    case 7:\n      return [4, 6, 8];\n\n    case 8:\n      return [5, 7];\n\n    default:\n      console.log('Sorry, we are out of ' + id + '.');\n  }\n}\n\nfunction removeCardFromHand(card, id) {\n  card.splice(id, 1);\n}\n\nconst TripleTriad = Game({\n  setup: ctx => ({\n    cells: Array(9).fill({\n      player: null,\n      card: null\n    }),\n    firstPlayerHand: randomizeCards(ctx),\n    secondPlayerHand: randomizeCards(ctx),\n    selectedCard: null,\n    firstPlayerCaptures: [],\n    secondPlayerCaptures: []\n  }),\n  moves: {\n    // select card, select cell\n    selectCard(G, ctx, id) {\n      if (ctx.currentPlayer === '0') {\n        G.selectedCard = G.firstPlayerHand[id];\n      } else {\n        G.selectedCard = G.secondPlayerHand[id];\n      }\n    },\n\n    selectCell(G, ctx, id) {\n      let player = null;\n\n      if (G.cells[id] === null) {\n        G.cells[id] = G.selectedCard;\n\n        if (ctx.currentPlayer === '0') {\n          G.firstPlayerCaptures.push(id);\n          player = G.firstPlayerHand;\n        } else {\n          G.secondPlayerCaptures.push(id);\n          player = G.secondPlayerHand;\n        }\n\n        removeCardFromHand(player);\n      }\n\n      const neighbors = checkNeighbors(id);\n      neighbors.map(dir => {\n        if (G.cells[dir] !== null) {\n          let val = null;\n          let inv = null;\n\n          if (id + 1 === dir) {\n            val = 1;\n            inv = 3;\n          }\n\n          if (id + 3 === dir) {\n            val = 2;\n            inv = 0;\n          }\n\n          if (id - 1 === dir) {\n            val = 3;\n            inv = 1;\n          }\n\n          if (id - 3 === dir) {\n            val = 0;\n            inv = 2;\n          }\n\n          if (ctx.currentPlayer === '0' && G.secondPlayerCaptures.includes(dir) || ctx.currentPlayer === '1' && G.firstPlayerCaptures.includes(dir)) {\n            let capture = checkCard(val, G.selectedCard, G.cells[dir], inv);\n\n            if (capture) {\n              if (ctx.currentPlayer === '0') {\n                const index = G.secondPlayerCaptures.indexOf(dir);\n                G.secondPlayerCaptures.splice(index, 1);\n                G.firstPlayerCaptures.push(dir);\n              } else {\n                const index = G.firstPlayerCaptures.indexOf(dir);\n                G.firstPlayerCaptures.splice(index, 1);\n                G.secondPlayerCaptures.push(dir);\n              }\n            }\n          }\n\n          ;\n        }\n      });\n    }\n\n  },\n  flow: {\n    endGameIf: (G, ctx) => {\n      // if win\n      if (G.cells.every(cell => cell !== null)) {\n        console.log(\"end game\");\n\n        if (G.secondPlayerCaptures.length > G.firstPlayerCaptures.length) {} else {}\n      } // if draw\n\n    }\n  }\n});\nconst App = Client({\n  game: TripleTriad,\n  board: GameBoard\n});\nexport default App;","map":{"version":3,"sources":["/Users/francesca/Documents/Games/triple-triad/src/App.js"],"names":["React","Component","Client","Game","GameBoard","onCardClick","id","props","moves","selectCard","onClick","console","log","isActive","selectCell","events","endTurn","G","cells","isFirstPlayer","ctx","currentPlayer","playerCaptured","render","winner","gameover","gameoever","undefined","firstPlayerHand","map","card","index","v","firstPlayerCaptures","length","cellValue","selectedCard","secondPlayerHand","secondPlayerCaptures","isWin","isDraw","checkCard","direction","playerCard","enemyCard","inv","flipCard","randomizeCards","cards","i","push","random","Die","checkNeighbors","removeCardFromHand","splice","TripleTriad","setup","Array","fill","player","neighbors","dir","val","includes","capture","indexOf","flow","endGameIf","every","cell","App","game","board"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport { Client } from 'boardgame.io/react';\nimport { Game } from 'boardgame.io/core';\n\n\nclass GameBoard extends Component {\n  onCardClick(id) {\n    this.props.moves.selectCard(id);\n  }\n\n  // when grid cell is clicked\n  onClick(id) {\n    console.log(id);\n    if(this.isActive(id)) {\n      this.props.moves.selectCell(id);\n      this.props.events.endTurn();\n    }\n  }\n\n  isActive(id) {\n    if (!this.props.isActive) return false;\n    if (this.props.G.cells[id] !== null) return false;\n    return true;\n  }\n\n  isFirstPlayer() {\n    return this.props.ctx.currentPlayer === '0';\n  }\n\n  playerCaptured(id) {\n    if (this.props.G.cells[id] === null) {\n      return 'blank';\n    } else {\n      // if it's player 1 that put the card, return player1 class\n      // else, if it's player 2,  return player2 class\n    }\n  }\n\n  render() {\n    let winner = '';\n    if (this.props.ctx.gameover) {\n      winner = this.props.ctx.gameoever.winner !== undefined ? (\n        <div id=\"winner\">Winner: {this.props.ctx.gameover.winner}</div>\n      ) : (\n        <div id=\"winner\">Draw!</div>\n      );\n    }\n    \n    return (\n      <div className=\"tripleTriadGame\">\n        <div className={`player player1 ${this.isFirstPlayer() ? \"current\" : \"\"}`}>\n          {\n              this.props.G.firstPlayerHand.map((card, index) => {\n                return (\n                  <div className=\"card\" onClick={() => this.onCardClick(index)}>\n                    { card.map((v) => {\n                        return (\n                          <div className=\"cardScore\">{v}</div>\n                        )\n                      })\n                    }\n                  </div>\n                )\n              })\n            }\n            <div>Score: {this.props.G.firstPlayerCaptures.length} </div>\n        </div>\n        <div className=\"board\">\n          {\n            this.props.G.cells.map((id, index) => {\n              let cellValue = this.props.G.selectedCard ? id : \"\";\n              return (\n                <div key={index} className=\"cell\" onClick={() => this.onClick(index)}>\n                  <div className={`card selected ${this.playerCaptured(index)}`}>\n                    { \n                      cellValue ? \n                      (cellValue.map((v) => {\n                        return (\n                          <div className=\"cardScore\">{v}</div>\n                        )\n                      })) :\n                      \"\"\n                    }\n                  </div>\n                </div>\n              )\n            })\n          }\n        </div>\n        <div className={`player player2 ${this.isFirstPlayer() ? \"\" : \"current\"}`}>\n          {\n            this.props.G.secondPlayerHand.map((card, index) => {\n              return (\n                <div className=\"card\" onClick={() => this.onCardClick(index)}>\n                  { card.map((v) => {\n                      return (\n                        <div className=\"cardScore\">{v}</div>\n                      )\n                    })\n                  }\n                </div>\n              )\n            })\n          }\n          <div>Score: {this.props.G.secondPlayerCaptures.length} </div>\n        </div>\n        { winner }\n      </div>\n    )\n  }\n}\n\nfunction isWin() {\n\n}\n\nfunction isDraw() {\n\n}\n\nfunction checkCard(direction, playerCard, enemyCard, inv) {\n  let flipCard = false;\n  if (enemyCard) {\n    console.log(\"Enemy \" + enemyCard, \"Player \" + playerCard, \"Direction \" + direction);\n    if (playerCard[direction] > enemyCard[inv]) {\n      flipCard = true;\n      console.log(flipCard, \"yasss\");\n      return flipCard;\n    }\n  }\n  // if yes, check if playerCard > enemyCard in corresponding direction\n}\n\nfunction randomizeCards(ctx) {\n  let cards = [];\n  for(let i = 0; i < 5; i++) {\n    cards.push(ctx.random.Die(10, 4));\n    // cards = source.reduce((obj, arrValue) => (obj[arrValue] = ctx.random.Die(10), obj), {}); \n    // hand.push(Object.entries(cards));\n  }\n  return cards;\n}\n\nfunction checkNeighbors(id) {\n  switch (id) {\n    case 0:\n      return [1, 3];\n    case 1:\n        return [0, 2, 4];\n    case 2:\n        return [1, 5];\n    case 3:\n        return [0, 4, 6];\n    case 4:\n        return [1, 3, 5, 7];\n    case 5:\n        return [2, 4, 8];\n    case 6:\n        return [3, 7];\n    case 7:\n        return [4, 6, 8];\n    case 8:\n        return [5, 7];\n    default:\n      console.log('Sorry, we are out of ' + id + '.');\n  }\n}\n\nfunction removeCardFromHand(card, id) {\n  card.splice(id, 1);\n}\n\nconst TripleTriad = Game({\n  setup: (ctx) => ({ \n    cells: Array(9).fill({player: null, card: null}),\n    firstPlayerHand: randomizeCards(ctx),\n    secondPlayerHand: randomizeCards(ctx),\n    selectedCard: null,\n    firstPlayerCaptures: [],\n    secondPlayerCaptures: [],\n  }),\n  moves: {\n    // select card, select cell\n    selectCard(G, ctx, id) {\n      if (ctx.currentPlayer === '0') {\n        G.selectedCard = G.firstPlayerHand[id];\n      } else {\n        G.selectedCard = G.secondPlayerHand[id];\n      }\n    },\n\n    selectCell(G, ctx, id) {\n      let player = null;\n      if (G.cells[id] === null) {\n        G.cells[id] = G.selectedCard;\n        if (ctx.currentPlayer === '0') {\n          G.firstPlayerCaptures.push(id);\n          player = G.firstPlayerHand;\n        } else {\n          G.secondPlayerCaptures.push(id);\n          player = G.secondPlayerHand;\n        }\n        removeCardFromHand(player);\n      }\n\n      const neighbors = checkNeighbors(id);\n      neighbors.map((dir) => {\n        if (G.cells[dir] !== null) {\n          let val = null;\n          let inv = null;\n          if (id+1 === dir) {\n            val = 1;\n            inv = 3;\n          } \n          if (id+3 === dir) {\n            val = 2;\n            inv = 0;\n          }\n          if (id-1 === dir) {\n            val = 3;\n            inv = 1;\n          }\n          if (id-3 === dir) {\n            val = 0;\n            inv = 2;\n          }\n\n          if ((ctx.currentPlayer === '0' && G.secondPlayerCaptures.includes(dir)) || (ctx.currentPlayer === '1' && G.firstPlayerCaptures.includes(dir))) {\n            let capture = checkCard(val, G.selectedCard, G.cells[dir], inv);\n            if (capture) {\n              if (ctx.currentPlayer === '0') {\n                const index = G.secondPlayerCaptures.indexOf(dir);\n                G.secondPlayerCaptures.splice(index, 1);\n                G.firstPlayerCaptures.push(dir);\n              } else {\n                const index = G.firstPlayerCaptures.indexOf(dir);\n                G.firstPlayerCaptures.splice(index, 1);\n                G.secondPlayerCaptures.push(dir);\n              }\n            }\n          };\n        }\n      })\n    }\n  },\n\n  flow: {\n    endGameIf: (G, ctx) => {\n      // if win\n      if (G.cells.every(cell => cell !== null)) {\n        console.log(\"end game\");\n        if (G.secondPlayerCaptures.length > G.firstPlayerCaptures.length) {\n          \n        } else {\n\n        }\n      }\n      // if draw\n    },\n  }\n});\n\nconst App = Client({ \n  game: TripleTriad,\n  board: GameBoard,\n});\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}